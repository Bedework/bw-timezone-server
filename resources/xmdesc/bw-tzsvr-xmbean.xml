<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mbean PUBLIC "-//JBoss//DTD JBOSS XMBEAN 1.1//EN"
   "http://www.jboss.org/j2ee/dtd/jboss_xmbean_1_1.dtd" [
	<!ATTLIST interceptor
	proxyName CDATA #IMPLIED
>
]>

<mbean>
	<description>
	  This provides a timezone service
   </description>
	<class>org.bedework.timezones.service.Tzsvc</class>
	<constructor>
		<description>The default constructor</description>
		<name>Tzsvc</name>
	</constructor>
   
   &defaultAttributes;

   <attribute access="read-only" getMethod="getAppname" >
		<description>Bedework internal name.</description>
		<name>Appname</name>
    <type>java.lang.String</type>
	</attribute>

   <attribute access="read-write" getMethod="getPrimaryServer" setMethod="setPrimaryServer">
		<description>Is this a primary server.</description>
		<name>PrimaryServer</name>
		<type>boolean</type>
	</attribute>

	<attribute access="read-write" getMethod="getPrimaryUrl" setMethod="setPrimaryUrl">
		<description>The URL of a primary server.</description>
		<name>PrimaryUrl</name>
    <type>java.lang.String</type>
	</attribute>

	<attribute access="read-write" getMethod="getRefreshInterval" setMethod="setRefreshInterval">
		<description>How often we attempt to refresh from the primary - seconds.</description>
		<name>RefreshInterval</name>
		<type>long</type>
	</attribute>

	<attribute access="read-write" getMethod="getTzdataUrl" setMethod="setTzdataUrl">
		<description>Location of the (backup) zip file.</description>
		<name>TzdataUrl</name>
    <type>java.lang.String</type>
	</attribute>

	<!-- Operations -->

  <operation>
    <description>Provide some statistics.</description>
    <name>getStats</name>
    <return-type>java.util.List</return-type>
  </operation>

  <operation>
    <description>Compare data pointed to by tzdataUrl with the current data.</description>
    <name>compareData</name>
    <parameter>
      <description>Url of the zipped data to compare against</description>
      <name>tzdataUrl</name>
      <type>java.lang.String</type>
    </parameter>
    <return-type>java.lang.String</return-type>
  </operation>

  <operation>
    <description>Update the data from the zipped data at the given url.</description>
    <name>updateData</name>
    <parameter>
      <description>Url of the zipped data to compare against</description>
      <name>tzdataUrl</name>
      <type>java.lang.String</type>
    </parameter>
    <return-type>java.lang.String</return-type>
  </operation>

  <operation>
    <description>Refresh all the data - almost a restart. 
May take a while if it updates from a primary.</description>
    <name>refreshData</name>
    <return-type>java.lang.String</return-type>
  </operation>

  <operation>
    <description>Check with primary source.</description>
    <name>checkData</name>
    <return-type>java.lang.String</return-type>
  </operation>

  <operation>
    <description>Recreate the database.</description>
    <name>recreateDb</name>
    <return-type>java.lang.String</return-type>
  </operation>

   &defaultOperations;   			

</mbean>

